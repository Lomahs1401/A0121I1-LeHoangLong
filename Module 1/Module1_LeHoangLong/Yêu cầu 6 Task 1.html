<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Yêu cầu 6 task 1</title>
    <script type="text/javascript" src="Customer.js"></script>
</head>
<body>
    <script>
        let regexEmail = /\S+@\S+\.\S+/;
        let regexBirthday = /^\d{2}[./-]\d{2}[./-]\d{4}$/;
        let regexCmnd = /^[\d]{8,8}$/;
        let listCustomer = [];
        function displayMainMenu() {
            let choose = parseInt(prompt("1.Add new customer" + "\n2.Display information customer"
                + "\n3.Display total pays customer" + "\n4.Edit infomation customer" + "\n5.Delete customer"
                + "\n6.Exit" + "\n Bạn muốn chọn?"));
            switch (choose) {
                case 1: {
                    addNewCustomer();
                    break;
                }
                case 2: {
                    displayInformationCustomer();
                    break;
                }
                case 3: {
                    displayTotalPays();
                    break;
                }
                case 4: {
                    editInformationCustomer();
                    break;
                }
                case 5: {
                    deleteCustomer();
                    break;
                }
                case 6: {
                    break;
                }
                default: {
                    alert("Failed");
                    break;
                }
            }
        }
            function addNewCustomer() {
                let check = false;
                let cus = new Customer();
                let cmnd;
                let birthday;
                let email;
                let name = prompt("Enter the name: ");
                do{
                    cmnd = prompt("Enter cmnd: ");
                    if (regexCmnd.test(cmnd)) {
                        check = true;
                    } else {
                        alert("Cmnd không hợp lệ.");
                    }
                } while(!check);
                check = false;
                do {
                    birthday = prompt("Enter birthday: ");
                    if (regexBirthday.test(birthday)) {
                        check = true;
                    } else {
                        alert("Ngày sinh bạn nhập không hợp lệ.");
                    }
                } while (!check);
                check = false;
                do {
                    email = prompt("Enter email: ");
                    if (regexEmail.test(email)) {
                        check = true;
                    } else {
                        alert("Email không hợp lệ. Vui lòng nhập lại.");
                    }
                } while(!check);
                let address = prompt("Enter address: ");
                let typeService = prompt("Enter type service: "+"\n1.Villa 500$/day"+"\n2.House 300$/day"+"\n3.Room 100$/day");
                let typeRoom = prompt("Enter type room: ");
                let typeCustomer = prompt("Enter type customer: "+"\n1.Diamond"+"\n2.Platinium"+"\n3.Gold"+"\n4.Silver"+"\n5.Member");
                let discount = prompt("Enter discount: ");
                let quantityIncluded = prompt("Enter quantityIncluded: ");
                let rentDays = prompt("Enter rent days: ");

                cus.setName(name);
                cus.setCmnd(cmnd);
                cus.setBirtyday(birthday);
                cus.setEmail(email);
                cus.setAddress(address);
                cus.setTypeService(typeService);
                cus.setTypeRoom(typeRoom);
                cus.setTypeCustomer(typeCustomer);
                cus.setDiscount(discount);
                cus.setQuantityIncluded(quantityIncluded);
                cus.setRentDays(rentDays);
                listCustomer.push(cus);
                alert("Bạn đã thêm thành công");
                displayMainMenu();
            }
            function displayInformationCustomer() {
                let temp = "";
                for (let i = 0; i < listCustomer.length; i++) {
                    temp += i+". Name: "+listCustomer[i].getName()+"\n";
                }
                let chooseDisplay = parseInt(prompt(temp));
                alert("1.Tên: " + listCustomer[chooseDisplay].getName() + "\n"
                    + "2.CMND: " + listCustomer[chooseDisplay].getCmnd() + "\n"
                    + "3.Ngày sinh: " + listCustomer[chooseDisplay].getBirthday() + "\n"
                    + "4.Email: " + listCustomer[chooseDisplay].getEmail() + "\n"
                    + "5.Địa chỉ: " + listCustomer[chooseDisplay].getAddress() + "\n"
                    + "6.Loại dịch vụ: " + listCustomer[chooseDisplay].getTypeService() + "\n"
                    + "7.Loại phòng: " + listCustomer[chooseDisplay].getTypeRoom() + "\n"
                    + "8.Loại khách hàng: " + listCustomer[chooseDisplay].getTypeCustomer() + "\n"
                    + "9.Số lượng đi kèm: " + listCustomer[chooseDisplay].getQuantityIncluded() + "\n"
                    + "10.Ngày thuê: " + listCustomer[chooseDisplay].getRentDays());
                displayMainMenu();
            }
            function displayTotalPays() {
                let temp = "";
                for (let i = 0; i < listCustomer.length; i++) {
                    temp += i+". Name: "+listCustomer[i].getName()+"\n";
                }
                let chooseDisplay = parseInt(prompt(temp));
                alert("Total pays của" + listCustomer[chooseDisplay].getName() +" là "
                    + listCustomer[chooseDisplay].totalPays() + "$");
                displayMainMenu();
            }
            function editInformationCustomer() {
                let temp = "";
                for (let i = 0; i < listCustomer.length; i++) {
                    temp += i+". Name: "+listCustomer[i].getName()+"\n";
                }
                let choose = parseInt(prompt(temp));
                let chooseEdit = parseInt(prompt("1.Tên: " + listCustomer[choose].getName() + "\n"
                    + "2.CMND: " + listCustomer[choose].getCmnd() + "\n"
                    + "3.Ngày sinh: " + listCustomer[choose].getBirthday() + "\n"
                    + "4.Email: " + listCustomer[choose].getEmail() + "\n"
                    + "5.Địa chỉ: " + listCustomer[choose].getAddress() + "\n"
                    + "6.Loại dịch vụ: " + listCustomer[choose].getTypeService() + "\n"
                    + "7.Loại phòng: " + listCustomer[choose].getTypeRoom() + "\n"
                    + "8.Loại khách hàng: " + listCustomer[choose].getTypeCustomer() + "\n"
                    + "9.Số lượng đi kèm: " + listCustomer[choose].getQuantityIncluded() + "\n"
                    + "10.Ngày thuê: " + listCustomer[choose].getRentDays() + "\n"
                    + "Nhâp số tương ứng với thông tin bạn muốn thay đổi"));
                switch (chooseEdit) {
                    case 1: {
                        listCustomer[choose].getName(prompt("Enter new name"));
                        alert("Bạn đã thay đổi thành công");
                        break;
                    }
                    case 2: {
                        listCustomer[choose].setCmnd(prompt("Enter new cmnd"));
                        alert("Bạn đã thay đổi thành công");
                        break;
                    }
                    case 3: {
                        listCustomer[choose].setBirthday(prompt("Enter new birthday"));
                        alert("Bạn đã thay đổi thành công");
                        break;
                    }
                    case 4: {
                        listCustomer[choose].setEmail(prompt("Enter new email"));
                        alert("Bạn đã thay đổi thành công");
                        break;
                    }
                    case 5: {
                        listCustomer[choose].setAddress(prompt("Enter new address"));
                        alert("Bạn đã thay đổi thành công");
                        break;
                    }
                    case 6: {
                        listCustomer[choose].setTypeService(prompt("Enter new type service"));
                        alert("Bạn đã thay đổi thành công");
                        break;
                    }
                    case 7: {
                        listCustomer[choose].setTypeRoom(prompt("Enter new type room"));
                        alert("Bạn đã thay đổi thành công");
                        break;
                    }
                    case 8: {
                       listCustomer[choose].setTypeCustomer(prompt("Enter new type customer"));
                        alert("Bạn đã thay đổi thành công");
                        break;
                    }
                    case 9: {
                        listCustomer[choose].setQuantityIncluded(prompt("Enter new quantityIncluded: "));
                        alert("Bạn đã thay đổi thành công");
                        break;
                    }
                    case 10: {
                        listCustomer[choose].setRentDays(prompt("Enter new rent days"));
                        alert("Bạn đã thay đổi thành công");
                        break;
                    }
                    default: {
                        alert("Failed");
                        break;
                    }
                }
                displayMainMenu();
            }
        function deleteCustomer() {
            let temp = "";
            for (let i = 0; i < listCustomer.length; i++) {
                temp += i+". Name: "+listCustomer[i].getName()+"\n";
            }
            let chooseDelete = parseInt(prompt(temp));
            let check = parseInt(prompt("Are you sure to delete customer."+"\n1.Yes"+"\n2.No"));
            if (check === 1) {
                listCustomer.splice(chooseDelete, 1);
                alert("Bạn đã xóa thông tin khách hàng");
            }
            else {
                alert("Cancel");
            }
            displayMainMenu();
        }
            displayMainMenu();
    </script>

</body>
</html>